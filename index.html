<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document Library</title>

  <!-- DataTables CSS -->
  <link rel="stylesheet" 
        href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">

  <!-- Optional: make it cleaner & centered -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 20px;
      background: #f7f7f7;
    }
    .wrapper {
      max-width: 1200px;
      margin: 0 auto;
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
    }
    table.dataTable thead th {
      background: #fafafa;
    }
  </style>
</head>
<body>
<div class="wrapper">
  <h1>Document Library</h1>
  <table id="library" class="display" style="width:100%">
    <thead>
      <!-- This will be filled dynamically from CSV header -->
    </thead>
    <tbody>
      <!-- Rows will be injected here -->
    </tbody>
  </table>
</div>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<!-- DataTables JS -->
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>

<!-- PapaParse for CSV parsing -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<script>
  // ðŸ”´ REPLACE THIS with your Google Sheets published CSV URL
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQuDr22lKdloQ7VZEe6mtitlW0gHHGRNeyruC6eiqcINEWrQ8gzHfkLV3eCzzzN-s7b6CdzcRotEIfn/pub?output=csv";

  Papa.parse(CSV_URL, {
    download: true,
    header: true,
    complete: function(results) {
      const data = results.data.filter(row => Object.keys(row).some(k => row[k] !== ""));
      if (!data.length) return;

      const columns = Object.keys(data[0]);

      // Build table header
      const thead = $("#library thead");
      const headerRow = $("<tr></tr>");
      columns.forEach(col => {
        headerRow.append($("<th></th>").text(col));
      });
      thead.append(headerRow);

      // Init DataTable
      $('#library').DataTable({
        data: data,
        columns: columns.map(col => ({ data: col })),
        pageLength: 25,
        lengthMenu: [10, 25, 50, 100],
        order: [], // no default sort; keep as in sheet
      });
    }
  });
</script>
</body>
</html>
